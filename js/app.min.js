/*!
 * GardenApp
 */
angular.module("GardenApp",[]).controller("gardenCtrl",["$scope","$http","$filter",function(t,e,a){var r=this,o="";r.today={summary:"",precipProbability:"",reminderMsg:""},r.setted={cityName:"",currentLocation:"",waterHourString:"",waterHour:""};var i=function(t,a,i){e.jsonp("https://api.darksky.net/forecast/"+t+"/"+a+"?&lang=es&units=si&callback=JSON_CALLBACK").then(function(t){o=t.data,r.today.summary=o.daily.data[0].summary,r.today.precipProbability=o.daily.data[0].precipProbability,d(),"function"==typeof i&&i(o)},function(t){console.log("Algo salio mal. Status: ",t.status,"statusText: ",t.statusText)})},n=function(t){r.setted.waterHour=new Date(1e3*t.daily.data[0].sunsetTime),r.setted.waterHourString=a("date")(r.setted.waterHour,"HH:mm"),c(r.setted.waterHour)},s=function(t){r.setted.cityName=cityName,r.setted.currentLocation=currentLocation,t(apiKey,r.setted.currentLocation,n)},d=function(){0===r.today.precipProbability?r.today.reminderMsg="No te olvides de regar las plantas":r.today.reminderMsg="Hoy hay probabilidades de lluvia"},u=function(t){setTimeout(function(){alert(r.today.reminderMsg)},t)},c=function(t){var e=new Date,a=t-e;u(a)};s(i)}]);